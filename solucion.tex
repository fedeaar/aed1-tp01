\documentclass[a4paper]{article} 

\setlength{\parskip}{0.1em}
\newcommand{\tab}[1][1.2cm]{\hspace*{#1}}
\input{Algo1Macros}
\usepackage{caratula} % Version modificada para usar las macros de algo1 de ~> https://github.com/bcardiff/dc-tex
\usepackage{xcolor}

% === macros === %
\newcommand{\type}[2]{%
    {\normalfont\bfseries\ttfamily\noindent type\ }%
    {\normalfont\ttfamily #1}
    {= #2\\}%
}
\newcommand{\enum}[2]{%
    {\normalfont\bfseries\ttfamily\noindent enum\ }%
    {\normalfont\ttfamily #1}
    {\{#2\}}%
}
\newcommand{\comment}[2]{%
    \\[0.5ex]
    {#1\comentario{\text{#2}}}
    \\[0.5ex]
}


\begin{document}

% === caratula === %
\titulo{TP de Especificaci\'on}
\subtitulo{An\'alisis Habitacional Argentino}
\fecha{8 de Septiembre de 2021}
\materia{Algoritmos y Estructuras de Datos I}
\grupo{Grupo 02, comisi\'on 11}
\newcommand{\senial}{\textit{se\~nal}}

\integrante{Lakowsky, Manuel}{511/21}{mlakowsky@gmail.com}
\integrante{Lenardi, Juan Manuel}{56/14}{juanlenardi@gmail.com}
\integrante{Arienti, Federico}{316/21}{fa.arienti@gmail.com}

\maketitle

% === problemas === %
\section{Problemas}

% === esEncuestaValida === %
\subsection{proc. esEncuestaValida}

    \subsubsection{Especificaci\'on:}
        \begin{proc}{esEncuestaValida}{\In th: $eph_{h}$, \In ti : $eph_{i}$, \Out result: \bool}{}
            \pre{\True}
            \post{result = \True \Iff sonEncuestasValidas(th,\ ti)}
        \end{proc}

    \subsubsection{Predicados y funciones auxiliares:}
        \noindent\pred{sonEncuestasValidas}{th: $eph_{h}$, ti: $eph_{i}$}{\\
            \tab esTablaDeHogaresValida(th)\ \y\ esTablaDeIndividuosValida(ti)\\
        }
        $\newline$
        \noindent\pred{esTablaDeHogaresValida}{th: $eph_{h}$}{\\
            \tab esTabla(th,\ @largoItemHogar)\ \yLuego\\
            \tab (\forall i: \ent)(0 \leq i < |th| \implicaLuego\ (\\
            \tab\tab codigoValido_h(th,\ ti,\ i)\ \y\ a\tilde{n}oyTrimestreCongruente_h(th,\ th[i])\ \y\ attEnRango_h(th[i])\\
            \tab))\\
        }
        $\newline$
        \noindent\pred{esTablaDeIndividuosValida}{ti: $eph_{i}$}{\\
            \tab esTabla(ti,\ @largoItemIndividuo)\ \yLuego\\
            \tab(\forall i: \ent)(0 \leq i < |ti|\ \implicaLuego\ (\\
            \tab\tab codigoValido_i(th,\ ti,\ i)\ \y\ a\tilde{n}oyTrimestreCongruente_i(th,\ ti[i])\ \y\ attEnRango_i(ti[i])\ \y\\
            \tab\tab validarComponente_i(ti,\ ti[i])\\
            \tab))\\
        }
        $\newline$
        \pred{codigoValido$_{h}$}{th: $eph_{h}$, ti: $eph_{i}$, i: \ent}{\\
            \tab(\exists j: individuo)(j \in ti\ \yLuego\\
            \tab\tab th[i][@hogcodusu] = j[@indcodusu]\\
            \tab) \y\\
            \tab\neg(\exists j: \ent)((0 \leq j < |th| \y\ i \neq j)\ \yLuego\\ 
            \tab\tab th[i][@hogcodusu] = th[j][@hogcodusu]\\
            \tab)\\
        }
        $\newline$
        \pred{añoyTrimestreCongruente$_{h}$}{th: $eph_{h}$, h: $hogar$}{\\
            \tab h[@hoga\tilde{n}o] = th[0][@hoga\tilde{n}o]\ \y \ h[@hogtrimestre] = th[0][@hogtrimestre]\\
        }
        $\newline$
        \pred{attEnRango$_{h}$}{h: $hogar$}{\\
            \tab 0 \leq h[@hogcodusu]\ \y\\ 
            \tab 1810 \leq h[@hoga\tilde{n}o]\ \y\\
            \tab 1 \leq h[@hogtrimestre] \leq 4\ \y\\
            \tab -90 \leq h[@hoglatitud] \leq 90\ \y\\
            \tab -180 \leq h[@hoglongitud] \leq 180\ \y\\
            \tab 1 \leq h[@ii7] \leq 3\ \y\\ 
            \tab 1 \leq h[@region] \leq 6\ \y\\ 
            \tab 0 \leq h[@mas\_500] \leq 1\ \y\\
            \tab 1 \leq h[@iv1] \leq 5\ \y\\ 
            \tab 0 < h[@ii2] \leq h[@iv2]\ \y\\
            \tab 1 \leq h[@ii3] \leq 2\\
        }
        $\newline$          
        \noindent\pred{codigoValido$_{i}$}{th: $eph_{h}$, ti: $eph_{i}$, i: \ent}{\\
            \tab(\exists h: hogar)(h \in th\ \yLuego \\
            \tab\tab ti[i][@indcodusu] = h[@hogcodusu]\\
            \tab) \y\\
            \tab\neg(\exists j: \ent)((0 \leq j < |th|\ \y\  i \neq j)\ \yLuego\ (\\
            \tab\tab ti[i][@indcodusu] = ti[j][@indcodusu]\ \y\ ti[i][@componente] = ti[j][@componente]\\
            \tab))\\
        }
        $\newline$
        \pred{añoyTrimestreCongruente$_{i}$}{th: $eph_{h}$, i: $individuo$}{\\
            \tab i[@inda\tilde{n}o] = th[0][@hoga\tilde{n}o]\ \y\ i[@indtrimestre] = th[0][@hogtrimestre]\\
        }
        $\newline$
        \pred{attEnRango$_{i}$}{i: $individuo$}{\\
            \tab 0 \leq i[@indcodusu]\ \y\\ 
            \tab 1 \leq i[@componente] \leq 20\ \y\\
            \tab 1810 \leq i[@inda\tilde{n}o]\ \y\\
            \tab 1 \leq i[@indtrimestre] \leq 4\ \y\\
            \tab 1 \leq i[@ch4] \leq 2\ \y\\
            \tab 0 \leq i[@ch6]\ \y\\
            \tab 0 \leq i[@nivel\_ed] \leq 1\ \y\\ 
            \tab -1 \leq i[@estado] \leq 1\ \y\\ 
            \tab 0 \leq i[@cat\_ocup] \leq 4\ \y\\ 
            \tab -1 \leq i[@p47t]\ \y\\
            \tab 1 \leq i[@ppo4g] \leq 10\\    
        }
        $\newline$
        \pred{validarComponente$_{i}$}{ti: $eph_{i}$, i: $individuo$}{\\
            \tab i[@componente] = 1\ \vee (\exists i_2: individuo)(i_2 \in ti\ \yLuego\ i[@componente] - 1 = i_2[@componente])\\
        }

    \subsubsection{Observaciones:}
        \begin{itemize}
            \item se hace uso de diversos tipos y referencias definidos en 2.3 y 2.4.
            \item la funci\'on auxiliar $esTabla$, definida en 2.1., verifica que th y ti sean matrices del largo correcto y 
            con al menos una entrada.
            \item los predicados $codigoValido$ verifican, de forma cruzada, que los hogares tengan individuos asociados y viceversa, 
            y que no est\'en repetidos.    
            \item los predicados $a\tilde{n}oyTrimestreCongruente$ contrastan con la primer entrada de la tabla de hogares para asegurar
            la homogeneidad de los registros. 
            \item el predicado $validarComponente_{i}$ junto a $codigoValido_{i}$, y aplicado a todo individuo de la tabla, verifica que los 
            componentes ocurran de forma continua, es decir sin saltos mayores a 1, a partir del primero. 
            En consecuencia, basta con verificar \'estos predicados, y que los componentes est\'en en el rango correcto para asegurar 
            que no haya m\'as de 20 individuos por hogar. 
            \item consideramos que: 
                \begin{itemize}
                    \item $@hogcodusu$ y $@indcodusu$ son estrictamente positivos.
                    \item $@componente$ puede tomar valores entre 1 y 20 inclusive.
                    \item $@hoga\tilde{n}o$ y $@inda\tilde{n}o$ no pueden ser anteriores a la revoluci\'on de mayo.
                    \item $@hogtrimestre$ y $@indtrimestre$ toman valores entre 1 y 4 inclusive.
                    \item $@hoglatitud$ representa la direcci\'on $sur$ con n\'umeros negativos y $norte$ con positivos.
                    \item $@hoglongitud$ representa la direcci\'on $oeste$ con n\'umeros negativos y $este$ con positivos.
                    \item $@ch6$, al representar la edad, es mayor o igual a 0.
                    \item $@iv2$, la cantidad total de ambientes, es estrictamente mayor a 0.
                \end{itemize}
        \end{itemize}

% === histHabitacional === %   
\pagebreak
\subsection{proc. histHabitacional}

    \subsubsection{Especificaci\'on:}
        \begin{proc}{histHabitacional}{\In th: $eph_{h}$, \In ti: $eph_{i}$, \In region: $dato$, \Out res: \TLista{\ent}}{}
        \pre{sonEncuestasValidas(th,\ ti)\ \y\ (\exists h: hogar)(casaEnLaRegion(th,\ h,\ region))}
        % CORREGIR
        \post{\\
            maximoDeHabitaciones(th,\ region, res)\ \y \\
            (\forall i:\ent)(0\leq i < |res|\ \implicaLuego\\ 
            \tab res[i] = \#casasPorNroDeHabitaciones(th,\ k,\ i + 1)\\
        )}
        \end{proc}

    \subsubsection{Predicados y funciones auxiliares:}
        \noindent\pred{casaEnLaRegion}{th: $eph_{h}$, h: $hogar$, region: $dato$}{\\
            \tab h \in th\ \yLuego\ esHogarValido_{1{.}2}(h,\ region)\\
        }
        $\newline$
        \noindent\pred{esHogarValido$_{1{.}2}$}{h: $hogar$, region: $dato$}{\\
            \tab h[@region] = region\ \y\ h[@iv1] = 1\\
        }
        $\newline$
        \noindent \pred{maximoDeHabitaciones}{th: $eph_{h}$, region: $dato$, res: \TLista{\ent}}{\\
            \tab(\exists h : hogar)(casaEnLaRegion(th,\ h,\ region)\ \yLuego\ (\\
            \tab\tab h[@iv2] = |res|\ \y\ (\forall h_2 : hogar)(casaEnLaRegion(th,\ h_2,\ region)\ \implicaLuego\ h[@iv2] \geq h_2[@iv2])\\
            \tab)\\
        }
        $\newline$
        \noindent\aux{$\#$casasPorNroDeHabitaciones}{th: $eph_{h}$, region: $dato$, habitaciones: \ent}{\ent}{\\[2ex]
            \tab\displaystyle\sum_{h \in th}
            {(\IfThenElse {esHogarValido_{1{.}2}(h,\ region)\ \y\ h[@iv2] = habitaciones}{1}{0})}
        }

    \subsubsection{Observaciones:}
        \begin{itemize}
            \item se hace uso del predicado $sonEncuestasValidas$ definido en 1.1.2.
            \item consideramos, mediante el predicado $casaEnLaRegion$ en la precondici\'on, que no tiene sentido preguntarse sobre el 
            histograma habitacional de una regi\'on si \'esta no tiene hogares.
            \item el predicado $maximoDeHabitaciones$ verifica que el largo de la resolución corresponda con la cantidad 
            máxima de habitaciones en la tabla de hogares.
        \end{itemize}


% === laCasaEstaQuedandoChica === % 
\pagebreak
\subsection{proc. laCasaEstaQuedandoChica}

    \subsubsection{Especificaci\'on:}
        \begin{proc}{laCasaEstaQuedandoChica}{\In th: $eph_{h}$, \In ti: $eph_{i}$, \Out res: \TLista{\float}}{}
            \pre{sonEncuestasValidas(th,\ ti)\ \y\ 1 \leq region \leq 6}
            \post{|res| = 6\ \yLuego\ (\forall region: dato)(1 \leq region \leq 6\ \implicaLuego\ res[region - 1] = \%hacinado(th,\ ti,\ region))}
        \end{proc}

    \subsubsection{Predicados y funciones auxiliares:}
        \noindent\pred{$\Omega$NoVacio$_{1{.}3}$}{th: $eph_{h}$, region: $dato$}{\\
            \tab(\exists h: $hogar$)(h \in th\ \yLuego\ esHogarValido_{1{.}3}(h,\ region))\\
        }
        $\newline$
        \noindent\pred{esHogarValido$_{1{.}3}$}{h: $hogar$, region: $dato$}{\\
            \tab h[@region] = region\ \y\ h[@mas\_500] = 0\ \y\ h[@iv1] = 1\\
        }
        $\newline$
        \noindent\pred{casaHacinada}{ti: $eph_{i}$, h: $hogar$, region: $dato$}{\\
            \tab esHogarValido_{1{.}3}(h, region)\ \y\ \#individuosEnHogar(ti,\ h[@hogcodusu]) > 3 * h[@iv2]\\
        }
        $\newline$
        \noindent\aux{$\%$hacinado}{th: $eph_{h}$, ti: $eph_{i}$, region: $dato$}{\float}{\\[2ex]
            \tab\IfThenElse{{\Omega}NoVacio_{1{.}3}(th,\ region)}{
                \frac{\displaystyle\sum_{h \in th}{(\IfThenElse{casaHacinada(ti,\ h,\ region)}{1}{0})}}
                    {\displaystyle\sum_{h \in th}{(\IfThenElse{esHogarValido_{1{.}3}(h,\ region)}{1}{0})}}
            }{0}
        }
    
    \subsubsection{Observaciones:}
        \begin{itemize}
            \item se hace uso de la funci\'on auxiliar ${\#}individuosEnHogar$ definida en 2.2.
            \item la funci\'on auxiliar ${\%}hacinado$ considera como espacio de probabilidad ($\Omega$) a todos los hogares que cumplan 
            con el predicado $esHogarValido_{1{.}3}$.
            \item en el predicado $\%hacinado$ consideramos que si no hay hogares v\'alidos en una región, entonces la proporción de hogares hacinados respecto a esa región es 0.
        \end{itemize}


% === creceElTeleworkingEnCiudadesGrandes === %
\pagebreak
\subsection{proc. creceElTeleworkingEnCiudadesGrandes}

    \subsubsection{Especificaci\'on:}
        \begin{proc}{creceElTeleworkingEnCiudadesGrandes}{\In t1h: $eph_{h}$, \In t1i: $eph_{i}$, \In t2h: $eph_{h}$, \In t2i: $eph_{i}$, \Out res: \bool}{}
            \pre{
                (sonEncuestasValidas(t1h,\ t1i)\ \y\ sonEncuestasValidas(t2h,\ t2i))\ \yLuego\ comparacionValida(t1h,\ t1i,\ t2h,\ t2i)
            }
            \post{res = \True \iff $\%$teleworking(t1h,\ t1i) < $\%$teleworking(t2h,\ t2i)}
        \end{proc}

    \subsubsection{Predicados y funciones auxiliares:}
        \noindent\pred{comparacionValida}{t1h: $eph_{h}$, t1i: $eph_{i}$, t2h: $eph_{h}$, t2i: $eph_{i}$}{\\
            %\tab (t1h[0][@hoga\tilde{n}o] = t2h[0][@hoga\tilde{n}o] - 1\ \y\ 
            \tab t1h[0][@hogtrimestre] = t2h[0][@hogtrimestre])\ \y\ t1h[0][@hoga\tilde{n}o] < t2h[0][@hoga\tilde{n}o]\\
        }
        $\newline$
        \pred{$\Omega$NoVacio$_{1{.}4}$}{th: $eph_{h}$}{\\
            \tab(\exists h:\ $hogar$)(h \in th\ \yLuego\ esHogarValido_{1{.}4}(h))\\
        }
        $\newline$
        \pred{esHogarValido$_{1{.}4}$}{h: $hogar$}{\\
            %\comment{\tab}{Hogar cumple con especificaciones}
            \tab h[@mas\_500] = 1\ \y\ (h[@iv1] = 1\ \vee\ h[@iv1] = 2)\\
        }
        $\newline$
        \pred{haceTeleworking}{th: $eph_{h}$, i: $individuo$}{\\
            %\comment{\tab}{Hogar e Individuo cumplen con especificaciones}
            \tab viveEnHogarValido(th, i)\ \y\ i[@ii3] = 1\ \y\ i[@ppo4g] = 6\\
        }
        $\newline$
        \pred{viveEnHogarValido}{th: $eph_{h}$, i: $individuo$}{\\
            %\comment{\tab}{Hogar del individuo cumple con especificaciones}
            \tab esHogarValido_{1{.}4}(th[indiceHogarPorCodusu(th,\ i[@indcodusu])])\\
        }
        $\newline$
        \aux{$\%$teleworking}{th: $eph_{h}$, ti: $eph_{i}$}{\float}{\\[2ex]
            \tab\IfThenElse{{\Omega}NoVacio_{1{.}4}(th)}{
                \frac{
                    \displaystyle\sum_{i \in ti}(\IfThenElse{haceTeleworking(th,\ i)}{1}{0})
                }{
                    \displaystyle\sum_{i \in ti}(\IfThenElse{viveEnHogarValido(th,\ i)}{1}{0})
                }
            }{0}
        }
            
    \subsubsection{Observaciones:}
        \begin{itemize}
            \item se hace uso del predicado $indiceHogarPorCodusu$ definido en 2.2. bajo la presunci\'on de una encuesta v\'alida.
            %\item consideramos como comparaci\'on v\'alida a aquella realizada entre encuestas de años consecutivos.
            \item la funci\'on auxiliar ${\%}teleworking$ considera como espacio de probabilidad ($\Omega$) a todos los individuos que cumplan 
            con el predicado $viveEnHogarValido$.
            \item en el predicado $\%teleworking$ consideramos que si no hay hogares v\'alidos para considerar, entonces la proporción de hogares  respecto al total es 0.
        \end{itemize}


% === costoSubsidioMejora === % 
\pagebreak
\subsection{proc. costoSubsidioMejora}

    \subsubsection{Especificaci\'on:}    
        \begin{proc}{costoSubsidioMejora}{\In th: $eph_{h}$, \In ti: $eph_{i}$, \In monto: \ent, \Out res: \ent}{}
            \pre{sonEncuestasValidas(th,\ ti)\ \y\ monto > 0} 
            \post{res = monto * \displaystyle\sum_{h \in th}(\IfThenElse{esHogarValido_{1{.}5}(ti,\ h)}{1}{0})}    
        \end{proc}

    \subsubsection{Predicados y funciones auxiliares:}
        \noindent\pred{esHogarValido$_{1{.}5}$}{ti: $eph_{i}$, h: $hogar$}{\\
            \tab h[@ii7] = 1\ \y\ h[@iv1] = 1\ \y\ \#individuosEnHogar(ti,\ h[@hogcodusu]) - 2 > h[@ii2]\\
        }

    \subsubsection{Observaciones:}
        \begin{itemize}
            \item consideramos que un subsidio es necesariamente un monto positivo y que, dado el objetivo final de la especificaci\'on
            debe ser mayor a 0.
        \end{itemize}

% === generarJoin === %
\pagebreak
\subsection{proc. generarJoin}
    \subsubsection{Especificaci\'on:}    
    \subsubsection{Predicados y funciones auxiliares:}
    \subsubsection{Observaciones:}
        \begin{itemize}
            \item
        \end{itemize}

% === ordenarRegionYTipo === %
\pagebreak
\subsection{proc. ordenarRegionYTipo}
    \subsubsection{Especificaci\'on:}    
    \subsubsection{Predicados y funciones auxiliares:}
    \subsubsection{Observaciones:}
        \begin{itemize}
            \item
        \end{itemize}

% === muestraHomogenea === %
\pagebreak
\subsection{proc. muestraHomogenea}
    \subsubsection{Especificaci\'on:}    
    \subsubsection{Predicados y funciones auxiliares:}
    \subsubsection{Observaciones:}
        \begin{itemize}
            \item
        \end{itemize}

% === corregirRegion === %
\pagebreak
\subsection{proc. corregirRegion}
    \subsubsection{Especificaci\'on:}    
    \subsubsection{Predicados y funciones auxiliares:}
    \subsubsection{Observaciones:}
        \begin{itemize}
            \item
        \end{itemize}

% === histogramaDeAnillosConcentricos === %
\pagebreak
\subsection{proc. histogramaDeAnillosConcentricos}
    \subsubsection{Especificaci\'on:}    
        \begin{proc}{histogramaDeAnillosConcentricos}{\In th: $eph_{h}$, \In centro: \ent$\times$\ent, \In distancias: \TLista{\ent}, \Out res: \TLista{\ent}}{}
            \pre{esTablaDeHogaresValida(th)\ \y\ esCentroValido(centro)\ \y\ sonDistanciasValidas(distancias)} 
            \post{\\
            |result| = |distancias|\ \yLuego (\\
            result[0] = \#HogaresEnAnillo(th,\ centro,\ 0,\ distancias[0])\ \y\\
            (\forall i:\ent)(0 < i < |result|\ \implicaLuego\\ 
                \tab result[i] = \#HogaresEnAnillo(th,\ centro,\ distancias[i - 1],\ distancias[i])\\
            ))} 
        \end{proc}
    
    \subsubsection{Predicados y funciones auxiliares:}
        \noindent\pred{esCentroValido}{centro \ent$\times$\ent}{\\
        \tab -90 \leq centro_{0} \leq 90\ \y\ -180 \leq centro_{1} \leq 180\\
        }
        $\newline$
        \noindent\pred{sonDistanciasValidas}{distancias: \TLista{\ent}}{\\
            \tab|distancias| > 0\ \yLuego\ (distancias[0] > 0\ \y\ (\forall i:\ent)(0 \leq i < |distancias| - 1\ \implicaLuego\ distancias[i] < distancias[i + 1]))\\
        }
        $\newline$
        \aux{$\#$HogaresEnAnillo}{th :  $eph_{h}$, centro: \ent$\times$\ent, desde: \ent, hasta: \ent}{\ent}{\\[2ex]
            \tab\displaystyle\sum_{h \in th}\IfThenElse{cuadrado(desde) \leq distancia(h,\ centro) < cuadrado(hasta)}{1}{0}
        }
        $\newline$
        \aux{distancia}{h: $hogar$, centro: \ent$\times$\ent}{\float}{
            cuadrado(h[@hoglatitud] - centro_{0}) + cuadrado(h[@hoglongitud] - centro_{1})
        }
        $\newline$
        \aux{cuadrado}{n : \ent}{\ent}{n * n}

    \subsubsection{Observaciones:}
        \begin{itemize}
            \item se hace uso del predicado $esTablaDeHogaresValida$ definido en 1.1.2.
            \item Dado que la pertenencia de una distancia P = (x, y) a un anillo concéntrico definido en el intervalo (positivo) de radios [A, B) respecto al centro C = (x$_{0}$, y$_{0}$) se define como: 
                \begin{equation}
                    A\ \leq\ \sqrt{(x - x_{0})^{2} + (y - y_{0})^{2}}\ <\ B
                \end{equation}
                Por simple manipulación algebráica (elevando al cuadrado), la misma relación se mantiene para:
                \begin{equation}
                    A^{2}\ \leq\ (x - x_{0})^{2} + (y - y_{0})^{2}\ <\ B^{2}
                \end{equation}
                el predicado $\#HogaresEnAnillo$ hace uso de esta observaci\'on.
                
                % agregar que todo es nec positivo
                % y otras obs
        \end{itemize}

% === quitarIndividuos === %
\pagebreak
\subsection{proc. quitarIndividuos}
    
    \subsubsection{Especificaci\'on:}    
        
        \begin{proc}{quitarIndividuos}{\Inout th : $eph_{h}$, \Inout ti : $eph_{i}$, \In busqueda : \TLista{(ItemIndividuo,\ dato)}, \Out result : ($eph_{h}$,\ $eph_{i}$)}{}
            \pre{
                sonEncuestasValidas(th,\ ti)\ \y\ esBusquedaValida(busqueda)\ \y\ th = th_{0}\ \y\ ti = ti_{0}
            }
            \post{\\
                (sonParticion(th_{0},\ th,\ result_{0})\ \y\ sonParticion(ti_{0},\ ti,\ result_{1}))\ \yLuego\\
                (losIndividuosEstanFiltrados(ti_{0},\ ti,\ result_{1},\ busqueda)\ \y\\ 
                losHogaresEstanFiltrados(th_{0},\ th,\ result_{0},\ ti_{0},\ busqueda))\\
            }
        \end{proc}

    \subsubsection{Predicados y funciones auxiliares:}
        
        \noindent\pred{esBusquedaValida}{busqueda : \TLista{(ItemIndividuo,\ dato)}}{\\
            % del mismo modo que no hace falta validar que un argumento se un entero, no hace falta validar que es un itemIndividuo
            \tab(\forall i : \ent)(0 \leq i < |busqueda| \implicaLuego (\\
            \tab\tab pideUnDatoValido(busqueda[i])\ \y\\
            \tab\tab\neg(\exists j : \ent)((0 \leq i < |busqueda|\ \y\ i \neq j)\ \yLuego\ (busqueda[i])_{0} = (busqueda[j])_{0})\\
            \tab))\\
        }
        $\newline$
        \pred{pideUnDatoValido}{condicion : (ItemIndividuo,\ dato)}{\\
            \tab (condicion_{0} = indcodusu\ \y\ 0 \leq condicion_{1})\ \vee\\
            \tab (condicion_{0} = componente\ \y\ 1 \leq condicion_{1} \leq 20)\ \vee\\
            \tab (condicion_{0} = inda\tilde{n}o\ \y\ 1810 \leq condicion_{1})\ \vee\\
            \tab (condicion_{0} = indtrimestre\ \y\ 1 \leq condicion_{1} \leq 4)\ \vee\\
            \tab (condicion_{0} = ch4\ \y\ 1 \leq condicion_{1} \leq 2)\ \vee\\
            \tab (condicion_{0} = ch6\ \y\ 0 \leq condicion_{1})\ \vee\\
            \tab (condicion_{0} = nive\_ed\ \y\ 0 \leq condicion_{1} \leq 1)\ \vee\\
            \tab (condicion_{0} = estado\ \y\ -1 \leq condicion_{1} \leq 1)\ \vee\\
            \tab (condicion_{0} = cat\_ocup\ \y\ 0 \leq condicion_{1} \leq 4)\ \vee\\
            \tab (condicion_{0} = p47t\ \y\ -1 \leq condicion_{1})\ \vee\\
            \tab (condicion_{0} = ppo4g\ \y\ 1 \leq condicion_{1} \leq 10)\\
        }
        $\newline$
        \pred{sonParticion}{original, sub$_{1}$, sub$_{2}$ : \TLista{T}}{\\
            %\tab |original| \geq |sub_{1}|\ \y\ |sub_{2}| = |original| - |sub_{1}|\ \y\\
            \tab(\forall i:T)(i \in sub_{1} ++\ sub_{2}\ \iff i \in original)\\ 
            %\y\ \neg(\exists i : T)(i \in sub_{1}\ \y\ i \in sub_{2})\\ 
        }
        $\newline$
        \pred{losIndividuosEstanFiltrados}{ti$_{0}$, ti, result$_{1}$, : $eph_{i}$, busqueda : \TLista{(ItemIndividuo,\ dato)}}{\\
        \tab(\forall i : $individuo$)(i \in ti_{0}\ \implicaLuego\ (\\
        \tab\tab (i \in result_{1}\ \y\ i \notin ti)\ \iff esBusquedaExitosa(i,\ busqueda)\\
        \tab))\\
        }
        $\newline$
        \pred{losHogaresEstanFiltrados}{th$_{0}$, th, result$_{0}$, : $eph_{h}$, ti$_{0}$ : $eph_{i}$,  busqueda : \TLista{(ItemIndividuo,\ dato)}}{\\
        \tab(\forall h : $hogar$)(h \in th_0\ \implicaLuego\ (\\
        \tab\tab (h \in result_{0}\ \y\ h \notin th)\ \iff\\
        \tab\tab (\forall i : $individuo$)((i \in ti_0\ \y\ i[@indcodusu] = h[@hogcodusu])\ \implicaLuego\ (\\
        \tab\tab\tab  esBusquedaExitosa(i,\ busqueda)\\
        \tab\tab))\\
        \tab))\\
        }
        $\newline$
        \pred{esBusquedaExitosa}{i : $individuo$, busqueda : \TLista{(ItemIndividuo,\ dato)}}{\\
            \tab (\forall\ condicion : (ItemIndividuo,\ dato))(condicion \in busqueda\ \implicaLuego\ (\\
            \tab\tab i[itemIndividuo.ord(condicion_{0})] = condicion_{1}\\ 
            \tab))\\
        }    
    
    
    \subsubsection{Observaciones:}
        \begin{itemize}
            \item
        \end{itemize}


% === generales === %
\pagebreak
\section{Predicados y Auxiliares generales}
                    
\subsection{Predicados Generales}
    \noindent\pred{esMatriz}{s: \TLista{\TLista{T}}}{\\
        \tab(\forall fila: \TLista{T})(fila \in s\ \implicaLuego\ |fila| = |s[0]|)\\
    }
    $\newline$
    \noindent\pred{esTabla}{m: \TLista{\TLista{T}}, columnas: \ent}{\\
        \tab |m| > 0 \yLuego (|m[0]| = columnas \y esMatriz(m))\\
    }

\subsection{Auxiliares Generales}     
    \noindent\aux{$\#$individuosEnHogar}{ti: $eph_{i}$, codusu$_{h}$: $dato$}{\ent}{
        \displaystyle\sum_{i \in ti}(\IfThenElse {i[@indcodusu] = codusu_h}{1}{0})
    }
    $\comment{}{indiceHogarPorCodusu asume codusu$_{h}$ existe en la tabla y es único}$
    \noindent\aux{indiceHogarPorCodusu}{th: $eph_{h}$, codusu$_{h}$: $dato$}{\ent}{
        \displaystyle\sum_{i = 0}^{|th| - 1}\IfThenElse{th[i][@hogcodusu] = codusu_h}{i}{0}
    }

\subsection{Tipos y Enumerados}
    \type {dato}{\ent}
    \type {individuo}{\TLista{dato}} 
    \type {hogar}{\TLista{dato}}
    \type {eph$_i$}{\TLista{individuo}}
    \type {eph$_h$}{\TLista{hogar}}
    \type {joinHI}{\TLista{hogar \times individuo}}

    \enum {ItemHogar}{hogcodusu, hogaño, hogtrimestre, hoglatitud, hoglongitud, ii7, region, mas\_500, iv1, iv2, ii2, ii3} 
    \\
    \enum {ItemIndividuo}{indcodusu, componente, indaño, indtrimestre, ch4, ch6, nivel\_ed, cat\_ocup, p47t, ppo4g}

\subsection{Referencias}
    \noindent\aux{@hogcodusu}{}{\ent}{itemHogar.ord(hogcodusu)}
    \noindent\aux{@hogaño}{}{\ent}{itemHogar.ord(hoga\tilde{n}o)}
    \noindent\aux{@hogtrimestre}{}{\ent}{itemHogar.ord(hogtrimestre)}
    \noindent\aux{@hoglatitud}{}{\ent}{itemHogar.ord(hoglatitud)}
    \noindent\aux{@hoglongitud}{}{\ent}{itemHogar.ord(hoglongitud)}
    \noindent\aux{@ii7}{}{\ent}{itemHogar.ord(ii7)}
    \noindent\aux{@region}{}{\ent}{itemHogar.ord(region)}
    \noindent\aux{@mas\_500}{}{\ent}{itemHogar.ord(mas\_500)}
    \noindent\aux{@iv1}{}{\ent}{itemHogar.ord(iv1)}
    \noindent\aux{@iv2}{}{\ent}{itemHogar.ord(iv2)}
    \noindent\aux{@ii2}{}{\ent}{itemHogar.ord(ii2)}
    \noindent\aux{@ii3}{}{\ent}{itemHogar.ord(ii3)}
    $\newline$
    \noindent\aux{@indcodusu}{}{\ent}{itemIndividuo.ord(indcodusu)}
    \noindent\aux{@componente}{}{\ent}{itemIndividuo.ord(componente)}
    \noindent\aux{@indaño}{}{\ent}{itemIndividuo.ord(inda\tilde{n}o)}
    \noindent\aux{@indtrimestre}{}{\ent}{itemIndividuo.ord(indtrimestre)}
    \noindent\aux{@ch4}{}{\ent}{itemIndividuo.ord(ch4)}
    \noindent\aux{@ch6}{}{\ent}{itemIndividuo.ord(ch6)}
    \noindent\aux{@nivel\_ed}{}{\ent}{itemIndividuo.ord(nivel\_ed)}
    \noindent\aux{@cat\_ocup}{}{\ent}{itemIndividuo.ord(cat\_ocup)}
    \noindent\aux{@p47t}{}{\ent}{itemIndividuo.ord(p47t)}
    \noindent\aux{@ppo4g}{}{\ent}{itemIndividuo.ord(ppo4g)}
    $\newline$
    \noindent\aux{@largoItemHogar}{}{\ent}{12}
    \noindent\aux{@largoitemIndividuo}{}{\ent}{10}

\end{document}

